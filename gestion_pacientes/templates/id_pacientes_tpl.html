{% extends 'base.html' %}

    {% block title %}

    	<title>fixuSystem - Fisioterapia - Gestión de pacientes</title>

    {% endblock %}

    {% block content %}

        {% load static %}

		<!-- Menú principal con imágenes -->
        <section class="sect-home-page-menu">

       		<!-- Devuelve los datos del paciente en varias tablas -->
        	{% for paciente in paciente_list %}

           		<!-- Tabla del paciente -->
                <table class="tbl-forms table-striped tbl-general tbl-60">

                    <!-- Texto con el contenido -->
                    <caption class="tbl-capt">Paciente : {{ paciente.name }} {{ paciente.familyname }} </caption>

                    <tr>
                        <td class="tbl-td-80">
                            <table class="tbl-in-tbl">

        		                <!-- Datos personales -->
            		            <tr>
		            	            <th class="tbl-th-izq">Nombre</th>
			                        <th class="tbl-td-60 tbl-th-izq">Apellidos</th>
            		            </tr>
	            	            <tr>
			                        <td>{{ paciente.name }}</td>
   				                    <td>{{ paciente.familyname }}</td>
        	    	            </tr>
            		            <tr>
                                    <th class="tbl-th-izq">Edad</th>
       				                <th class="tbl-th-izq">Fecha de nacimiento</th>
            		            </tr>
	            	            <tr>
                                    <!-- Calculado en la view y leida del contexto -->
                                    <td class="tbl-td">{{ age }}</td>
    			                    <td class="tbl-td">{{ paciente.birthdate|date:'d/F/Y' }}</td>
        	    	            </tr>
            		            <tr>
	            		            <th class="tbl-th-izq">DNI</th>
                                    <th class="tbl-th-izq">Sexo</th>
            		            </tr>
	            	            <tr>
		            	            <td class="tbl-td">{{ paciente.dni }}</td>
                                    <td class="tbl-td">{{ paciente.sex }}</td>
        	    	            </tr>

                            </table>
                        </td>
                        {% if paciente.picturefile.url != '' %}
                            <td><img class="img-paciente" height="240px" width="180px" src="{{ paciente.picturefile.url }}" /></td>
                        {% else %}
                            <td class="td-marco-foto">Sin foto</td>
                        {% endif %}
                    </tr>

	            </table>

          		<!-- Domicilio -->
                <table class="tbl-forms table-striped tbl-general tbl-60">

                    <caption class="tbl-capt">Domicilio</caption>

    		        <tr>
    		    	    <td class="tbl-td tbl-td-25">Dirección:</td>
                        <td class="tbl-td">{{ paciente.address }}</td>
                        <!-- Si hay un archivo de foto lo muestra -->
                    </tr>
                    <tr>
                    	<td class="tbl-td">CP-Localidad:</td>
                        <td class="tbl-td">{{paciente.postcode}}-{{ paciente.city }}</td>
                    </tr>
                    <tr>
		    	        <td class="tbl-td">Provincia:</td>
                        <td class="tbl-td">{{ paciente.province }}</td>
                    </tr>
                    <tr>
        		    	<td class="tbl-td">País:</td>
                        <td class="tbl-td">{{ paciente.country }}</td>
            		</tr>
        	    </table>

               	<!-- Datos de contacto -->
	            <table class="tbl-forms table-striped tbl-general tbl-60">

                    <caption class="tbl-capt">Datos de contacto</caption>

                    <tr>
        		    	<td class="tbl-td tbl-td-25">E-mail:</td>
                        <td class="tbl-td">{{ paciente.email }}</td>
                    </tr>
                    <tr>
    	    	    	<td class="tbl-td">Teléfono 1 / Teléfono 2:</td>
                        <td class="tbl-td">{{ paciente.phone1 }} / {{ paciente.phone2 }}</td>
                    </tr>
                    <tr>
	            		<td class="tbl-td">Notificar citas / Vía:</td>
                        <td class="tbl-td">{{ paciente.notifyappoint|yesno:'Si,No,Indet.' }} / {{ paciente.notifyvia }}</td>
    			    </tr>
		        </table>

           		<!-- Otros datos -->
	            <table class="tbl-forms table-striped tbl-general tbl-60">

                    <caption class="tbl-capt">Otros datos</caption>

                	<tr>
	    	        	<td class="tbl-td tbl-td-25">Ocupación</td>
	        		    <td class="tbl-td">{{ paciente.job }}</td>
                    </tr>
                    <tr>
    	    	    	<td class="tbl-td">Notas</td>
	    	    	    <td class="tbl-td">{{ paciente.notes }}</td>
                    </tr>
                    <tr>
        		    	<td class="tbl-td">Archivo foto</td>
                        <td class="tbl-td">{{ paciente.picturefile }}</td>
   			        </tr>
        	    </table>

                <!-- Datos de control -->
                <table class="table-striped table-dark tbl-general tbl-60">

                    <caption class="tbl-capt">Datos de control</caption>

        	        <tr>
            		    <th class="tbl-td-centro">Id Paciente</th>
	            	    <th class="tbl-td-centro">Fecha registro</th>
    	        		<th class="tbl-td-centro">Ultima modificación</th>
	    	        	<th class="tbl-td-centro">Modificado por</th>
        	        </tr>
                    <tr>
	        	   	    <td class="tbl-td-centro">{{ paciente.idPaciente }}</td>
    	    	       	<td class="tbl-td-centro">{{ paciente.firstupdated|date:'d/m/Y H:i' }}</td>
        	    	   	<td class="tbl-td-centro">{{ paciente.lastupdated|date:'d/m/Y H:i' }}</td>
	        	       	<td class="tbl-td-centro">{{ paciente.modifiedby }}</td>
    		        </tr>
	    	    </table>


		        <!-- Botones de acción -->
                <div class="div-botones">
                    <a href="{% url 'edit-id-pacientes' paciente.idPaciente %}"><input type="button" class="btn btn-info" value="Editar"></a>
                    <a href="{% url 'citas-paciente-desdefecha' paciente.idPaciente desde_fecha %}"><input type="button" class="btn btn-info" value="Citas"></a>
                    <a href="{% url 'menu-pacientes' %}"><input type="button" class="btn btn-info" value="Consultas"></a>
                    <a href="{% url 'menu-pacientes' %}"><input type="button" class="btn btn-info" value="Menu de pacientes"></a>
                </div>

    		{% endfor %}

        </section>

    {% endblock %}
